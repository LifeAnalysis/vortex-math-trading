<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex Trading Backtester</title>
    <link rel="stylesheet" href="/src/ui/styles.css">
    <!-- TradingView Lightweight Charts -->
    <script src="/public/libs/lightweight-charts.standalone.development.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåÄ Vortex Trading Backtester</h1>
            <p class="subtitle">Mathematical Pattern Backtesting Tool</p>
        </header>

        <main>
            <!-- Backtesting Configuration -->
            <section class="config-section">
                <h2>üìä Backtest Configuration</h2>
                <div class="config-grid">
                    <div class="config-group">
                        <label for="buy-signal">Buy Signal (Digital Root):</label>
                        <select id="buy-signal">
                            <option value="1" selected>1 - Start</option>
                            <option value="2">2 - Growth</option>
                            <option value="3">3 - Tesla Positive</option>
                            <option value="4">4 - Structure</option>
                            <option value="5">5 - Peak</option>
                            <option value="6">6 - Tesla Negative</option>
                            <option value="7">7 - Decline</option>
                            <option value="8">8 - Power</option>
                            <option value="9">9 - Balance</option>
                        </select>
                    </div>
                    
                    <div class="config-group">
                        <label for="sell-signal">Sell Signal (Digital Root):</label>
                        <select id="sell-signal">
                            <option value="1">1 - Start</option>
                            <option value="2">2 - Growth</option>
                            <option value="3">3 - Tesla Positive</option>
                            <option value="4">4 - Structure</option>
                            <option value="5" selected>5 - Peak</option>
                            <option value="6">6 - Tesla Negative</option>
                            <option value="7">7 - Decline</option>
                            <option value="8">8 - Power</option>
                            <option value="9">9 - Balance</option>
                        </select>
                    </div>
                    
                    <div class="config-group">
                        <label for="initial-capital">Initial Capital ($):</label>
                        <input type="number" id="initial-capital" value="10000" min="1000" max="1000000" step="1000">
                    </div>
                    
                    <div class="config-group">
                        <label for="date-range">Test Period:</label>
                        <div class="date-inputs">
                            <input type="date" id="start-date" value="2020-01-01">
                            <input type="date" id="end-date" value="2023-12-31">
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="run-backtest" class="btn-primary">üöÄ Run Backtest</button>
                    <button id="reset-config" class="btn-secondary">üîÑ Reset</button>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="results-section" style="display: none;">
                <h2>üìà Backtest Results</h2>
                
                <!-- Performance Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Total Return</h3>
                        <div class="metric-value" id="total-return">‚Äî</div>
                    </div>
                    <div class="metric-card">
                        <h3>Win Rate</h3>
                        <div class="metric-value" id="win-rate">‚Äî</div>
                    </div>
                    <div class="metric-card">
                        <h3>Total Trades</h3>
                        <div class="metric-value" id="total-trades">‚Äî</div>
                    </div>
                    <div class="metric-card">
                        <h3>Max Drawdown</h3>
                        <div class="metric-value negative" id="max-drawdown">‚Äî</div>
                    </div>
                    <div class="metric-card">
                        <h3>Sharpe Ratio</h3>
                        <div class="metric-value" id="sharpe-ratio">‚Äî</div>
                    </div>
                    <div class="metric-card">
                        <h3>Final Capital</h3>
                        <div class="metric-value" id="final-capital">‚Äî</div>
                    </div>
                </div>
                
                <!-- Navigation Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="chart">üìä Chart & Signals</button>
                    <button class="tab" data-tab="trades">üìã Trade History</button>
                    <button class="tab" data-tab="analysis">üîç Pattern Analysis</button>
                </div>
                
                <!-- Tab Content -->
                <div class="tab-content">
                    <div id="chart-tab" class="tab-panel active">
                        <div id="price-chart-container">
                            <!-- TradingView Chart Container -->
                            <div id="tradingview-chart" style="height: 500px; width: 100%;"></div>
                            <div id="chart-status">Chart will display after running backtest</div>
                        </div>
                        
                        <div class="signal-legend">
                            <h4>Signal Legend</h4>
                            <div class="legend-grid">
                                <div class="legend-item"><span class="signal-buy">üü¢</span> Buy Signal</div>
                                <div class="legend-item"><span class="signal-sell">üî¥</span> Sell Signal</div>
                                <div class="legend-item"><span class="signal-hold">‚ö™</span> Hold Position</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="trades-tab" class="tab-panel">
                        <div class="trades-container">
                            <div id="trades-table">No trades to display - run backtest first</div>
                        </div>
                    </div>
                    
                    <div id="analysis-tab" class="tab-panel">
                        <div class="analysis-grid">
                            <div class="analysis-card">
                                <h4>Digital Root Distribution</h4>
                                <div id="root-distribution">No data available</div>
                            </div>
                            <div class="analysis-card">
                                <h4>Strategy Performance</h4>
                                <div id="strategy-performance">Run backtest to see analysis</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="/src/core/vortex-math.js"></script>
    <script src="/src/data/coingecko-api.js"></script>
    <script src="/src/data/data-processor.js"></script>
    <script src="/src/data/tradingview-data.js"></script>
    <script src="/src/strategies/vortex-strategy.js"></script>
    <script src="/src/ui/app.js"></script>
</body>
</html>